
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>대선 이슈 시각화</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h2>대선별 주요 이슈 주목도 변화</h2>
    <div id="line-chart"></div>
    <h3>클릭한 이슈의 키워드 기여도 (Top 20)</h3>
    <div id="bar-chart" style="max-width: 100%;"></div>

    <script>
        const df = [{"index":"18대_박근혜","청년":17.38,"고용":16.99,"복지":18.85,"안보":7.95,"지역":16.89,"젠더":14.77,"기술":7.17},{"index":"19대_문재인","청년":15.97,"고용":20.64,"복지":15.73,"안보":11.51,"지역":14.32,"젠더":18.44,"기술":3.39},{"index":"20대_윤석열","청년":20.29,"고용":17.63,"복지":12.13,"안보":13.5,"지역":14.8,"젠더":6.77,"기술":14.89},{"index":"21대_이재명","청년":15.46,"고용":19.55,"복지":16.23,"안보":18.76,"지역":12.99,"젠더":6.95,"기술":10.05}];
        const keywordContributions = {"18대_박근혜": {"청년": {"취업": 0.0479169824372571, "대학": 0.5787709307224833, "교육": 0.6730347980917487, "공급": 0.2462969994796291, "대출": 0.27324679209699865, "격차": 0.07785490747314147, "도약": 0.04345506256216038, "청년": 0.6140793849060726, "희망": 0.23969497098788772, "임대": 0.08865568810942809, "기초": 0.31130124754185845, "학자금": 0.36074767007167996, "창업": 0.1688845071410919}, "고용": {"산업": 0.17264338482145633, "취업": 0.0479169824372571, "대기업": 0.06246972024606705, "일자리": 0.571385681860548, "고용": 0.4165887750865917, "근로자": 0.2511962166129012, "산재": 0.11551883111486516, "노조": 0.12296570192977246, "노동": 0.04950597173312224, "훈련": 0.07072526319142347, "중소": 0.6258704843687974, "정규직": 0.33943606449550995, "임금": 0.12566670500544605, "비정규직": 0.28004320384013276}, "복지": {"장애인": 0.23274901494954361, "복지": 0.6896467024693421, "요양": 0.13820619225323894, "노인": 0.29915569211818316, "간병": 0.05883695779722766, "소득": 0.30594270579084576, "보험": 0.19151399513156803, "육아": 0.20886029719462182, "다문화": 0.2490127989247492, "연금": 0.3523323486475693, "국민연금": 0.18050837838158126, "의료": 1.030370977751303, "주거": 0.051126308595813706, "취약": 0.13249651399532353}, "안보": {"북한": 0.1206167663909116, "협력": 0.07834469085913043, "남북관계": 0.038381430720529894, "안보": 0.3199785621546327, "도발": 0.08926938777995655, "군사": 0.06632060689837398, "국방": 0.1381653903644021, "방위": 0.0819771346198483, "외교": 0.20637846118419784, "일본": 0.0981793095301256}, "지역": {"발전": 0.14624977905780234, "철도": 0.09812296563823689, "지방": 0.1793912335550531, "공급": 0.2462969994796291, "지방자치단체": 0.04816394875569749, "수도권": 0.0655292836659042, "지자체": 0.06452624924062825, "분권": 0.06016739175158047, "공공기관": 0.16655893222742144, "어업": 0.06154552320169106, "농촌": 0.06635195094618379, "농어촌": 0.8292757736905125, "어촌": 0.0819771346198483, "농업": 0.23901522724355861, "주택": 0.31582065199937925}, "젠더": {"성범죄": 0.135530403581439, "여성": 1.4648177167534282, "남성": 0.08654156990488907, "육아": 0.20886029719462182, "육아휴직": 0.18170727928475933, "휴직": 0.05769437993659271, "임신": 0.637668038082642, "출산": 0.5468022314939289, "평등": 0.1048127758197895, "경력": 0.13776794326522976, "단절": 0.13776794326522976, "아이": 0.11929625688008562}, "기술": {"첨단": 0.14042354743329802, "에너지": 0.21101495956793065, "데이터": 0.12299915445751725, "기술": 0.03697175112244955, "인프라": 0.09801245335105109, "보안": 0.14088730917573025, "디지털": 0.052693084932954666, "혁신": 0.0743625624412681}}, "19대_문재인": {"청년": {"교육": 0.6411412692512883, "신혼부부": 0.07441018155988242, "공급": 0.07214772260071277, "청년": 0.07431013574508699, "창업": 0.4513694914572894, "대학": 0.1700122011651059, "기초": 0.07849080279295176, "도약": 0.10105654952962569, "미래": 0.5842181685605642, "임대": 0.1137648164798303, "학자금": 0.09481906500744809}, "고용": {"일자리": 0.6993607193948972, "중소": 0.13339588253201187, "스타트업": 0.07558284528747722, "산업": 0.3034285286392725, "비정규직": 0.3219250697418131, "노동": 0.24434903803694014, "고용": 0.12994232973970726, "정규직": 0.1299430087765396, "대기업": 0.0486899003234608, "규제": 0.14416574271219312, "임금": 0.19471009087075625, "공장": 0.06405803008570937, "근로": 0.04553988481932526, "산재": 0.10790608636647167, "노동자": 0.06420817293747999, "근로자": 0.06636635663998519}, "복지": {"취약": 0.06037563695655428, "국민연금": 0.032000353572529124, "주거": 0.07966800218609671, "노인": 0.12077501703955498, "연금": 0.10600342277059138, "소득": 0.07133025102534366, "의료": 0.44366900801379594, "간병": 0.08037890134937264, "보험": 0.036895388060150434, "장애인": 0.2874544549994881, "복지": 0.2564353707403323, "요양": 0.07382963495864397, "보건": 0.0909828234528044}, "안보": {"방산": 0.041467056100074805, "국방": 0.14118605740213636, "북핵": 0.03642417638872688, "방위": 0.055900699334506136, "북한": 0.12473110857612008, "남북관계": 0.04192377748454529, "외교": 0.1557419986466655, "협력": 0.2593790723292235, "안보": 0.02469703299168742, "평화": 0.06173684992231436}, "지역": {"지방": 0.10169915936629223, "분권": 0.08474207225624308, "주택": 0.09060747814738569, "공급": 0.07214772260071277, "혁신도시": 0.06609327525226956, "농업": 0.07638828027782048, "어촌": 0.9549348799869687, "농촌": 0.09364318815172577}, "젠더": {"평등": 0.7161414555229483, "차별": 0.1388082004751658, "단절": 0.13302491028756808, "성별": 0.046821717064378994, "경력": 0.1379383688410844, "여성": 0.2676868636790151, "젠더": 0.0726514653375147, "스토킹": 0.07727057654481062, "육아휴직": 0.34104666548279444, "출산": 0.5513727587950044, "임신": 0.1841728397717211, "인권": 0.6213999096329336}, "기술": {"플랫폼": 0.06284254723467472, "에너지": 0.2245091035633938, "과학": 0.11636814794320535, "데이터": 0.13943414279871955}}, "20대_윤석열": {"청년": {"대학": 0.038051940692448306, "임대": 0.029050958539303933, "공급": 0.03467508711837041, "격차": 0.03937457386620457, "공정": 2.1964337155311515, "신혼부부": 0.08416905697853225, "대출": 0.2730092717197157, "취업": 0.1633928261106879, "청년": 0.07486163829814414, "자산": 0.05879233973816891, "도약": 0.1463810919514708}, "고용": {"고용": 0.024369955541297974, "근로자": 0.027671412691979185, "근로": 0.16355640706836674, "훈련": 0.024763154490740596, "임금": 0.02303648856502431, "산업": 0.16807732131749792, "중소": 0.04998492157457699, "중견": 0.05627698419922884, "일자리": 0.2750336068589119, "경제성장": 0.05472214583367988, "규제": 0.2252076344370632, "취업": 0.1633928261106879, "산재": 0.2584887621614189, "노동": 0.24644324515831945}, "복지": {"주거": 0.04219061733457486, "의료": 0.0962140046570265, "장애인": 0.11841294862764765, "요양": 0.1347853085189719, "간병": 0.18499297309672869, "노인": 0.1366056205066242, "연금": 0.31190617999192677, "국민연금": 0.13831792306387639, "소득": 0.11158418827883804, "취약": 0.13553065651418725, "육아": 0.22486295942108583}, "안보": {"북한": 0.1556977133909917, "평화": 0.04454411783107336, "남북관계": 0.07148336939087663, "비핵화": 0.0938822007202027, "외교": 0.08819971847894918, "협력": 0.17748476542608693, "방위": 0.047266411455157975, "동맹": 0.16228711722568315, "미사일": 0.13820480894651455, "북핵": 0.08507954061928437, "한미": 0.20233099168542684, "안보": 0.18718504398393337, "국방": 0.14979392480213838}, "지역": {"주택": 0.075126381533082, "부동산": 0.1367628633949131, "공급": 0.03467508711837041, "어촌": 0.062167439147132526, "농업": 0.06612494038691212, "지방": 0.061214947591817885, "소멸": 0.05641324489499993, "교통": 0.14953887128169768, "철도": 0.0521354471482276, "수도권": 0.053299955614998056}, "젠더": {"인권": 0.09838351209570488, "성범죄": 0.15027097551806876, "여성가족부": 0.11417360728280382, "아이": 0.1638172521621947, "남성": 0.0503025748028585, "갈등": 0.11943011236925716, "육아": 0.22486295942108583, "육아휴직": 0.24445739454499965}, "기술": {"반도체": 0.05198268210525266, "클라우드": 0.029333781204187094, "기술": 0.03074263817755913, "데이터": 0.03135430213576694, "디지털": 0.23444362964948431, "에너지": 0.05805532649354112, "플랫폼": 0.36057264607566175, "혁신": 0.643456176349056, "보안": 0.08563020546210286, "사이버": 0.39491981209819615}}, "21대_이재명": {"청년": {"교육": 0.0471872714661595, "신혼부부": 0.047700080214846056, "임대": 0.05327314683155651, "공급": 0.0674657021779575, "대출": 0.09207260690521993, "도약": 0.13619100747780877, "대학원": 0.11510119623526878, "대학": 0.06626144152500851, "청년": 0.26264210297235985, "취업": 0.07546780535985205, "창업": 0.09002135884721518, "미래": 0.043870890199770154, "차세대": 0.11103744928571553, "자산": 0.14301008899372192, "공정": 1.0469359032544323}, "고용": {"임금": 0.08732404701576206, "규제": 0.2979147686415829, "중견": 0.07354635516275228, "고용": 0.14108234261571048, "노동": 0.35191527656583554, "근로": 0.04501879206149543, "노동자": 0.09327452711811947, "정규직": 0.03983108587279665, "산업": 0.46912393976196365, "일자리": 0.27210268439986685, "취업": 0.07546780535985205, "중소": 0.16568382660773806, "스타트업": 0.3346438362867401, "산재": 0.18626423335795514, "근로자": 0.04935365563377055, "경제성장": 0.20313221310221968}, "복지": {"주거": 0.12748432100205093, "연금": 0.1311445951298739, "의료": 0.4819907223722906, "요양": 0.09289213947705531, "간병": 0.14325512337797594, "장애인": 0.25092992521831153, "취약": 0.04419354472501918, "보험": 0.2321693059121483, "국민연금": 0.07840059169837743, "소득": 0.08668825073337026, "육아": 0.13329280223159462, "복지": 0.11248365491361147, "고령화": 0.6850067716966887}, "안보": {"방산": 0.07900773469976474, "국방": 0.15714978671119412, "중국": 0.06952334988706325, "외교": 0.2994837713742586, "군사": 0.16916260028538738, "협력": 0.29833055829393856, "남북관계": 0.0688326087360837, "비핵화": 0.11736367480934932, "계엄": 0.29560620251210773, "동맹": 0.06628418095613092, "한미": 0.08268251305789334, "평화": 0.6959445867112711, "안보": 0.5705899260265407, "내란": 1.024689277252448}, "지역": {"주택": 0.11595992577367606, "공급": 0.0674657021779575, "농업": 0.16948278331851144, "농어촌": 0.03544119333299378, "공공기관": 0.08964723900435302, "교통": 0.11530131093110488, "어촌": 0.06162387027311551, "어업": 0.1959072611016172, "수도권": 0.04249419993812048, "발전": 0.06404231097811083, "지방": 0.16073781191635772, "이전": 0.09881906200089696, "분권": 0.29245454824098255}, "젠더": {"인권": 0.06980984207544969, "차별": 0.03787965707639908, "육아": 0.13329280223159462, "육아휴직": 0.19080272182020933, "갈등": 0.10959803807866011, "성범죄": 0.08208071578036417, "아이": 0.17555819756815993, "경력": 0.18528024089077977, "여성": 0.550738501809874}, "기술": {"에너지": 0.12680567644615248, "플랫폼": 0.08148796074268413, "혁신": 0.20347467488326293, "기술": 0.08792763623014369, "첨단": 0.19359933949076766, "바이오": 0.05165682419590246, "반도체": 0.346583736718143, "데이터": 0.2120385789621209, "클라우드": 0.15594903125258106}}};

        const categories = Object.keys(df[0]).filter(k => k !== "index");

        const traces = categories.map(category => {
            return {
                x: df.map(row => row.index),
                y: df.map(row => row[category]),
                mode: "lines+markers",
                name: category,
                customdata: df.map(row => [row.index, category]),
                hovertemplate: "%{x}<br>%{y}%<extra>%{customdata[1]}</extra>"
            };
        });

        Plotly.newPlot("line-chart", traces, {
            title: "대선별 주요 이슈 주목도 변화",
            xaxis: {title: "대선 회차"},
            yaxis: {title: "주목도 비율 (%)"},
            hovermode: "closest"
        });

        document.getElementById("line-chart").on("plotly_click", function(data) {
            const [cand, category] = data.points[0].customdata;
            const contribDict = keywordContributions[cand]?.[category];

            if (!contribDict) {
                Plotly.newPlot("bar-chart", [], {
                    title: `[${cand}] '${category}' 분야 데이터 없음`
                });
                return;
            }

            const sortedEntries = Object.entries(contribDict)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 20);

            const keywords = sortedEntries.map(item => item[0]);
            const values = sortedEntries.map(item => item[1]);
            const total = values.reduce((a, b) => a + b, 0);
            const normalized = values.map(v => v / total);

            Plotly.newPlot("bar-chart", [{
                x: normalized,
                y: keywords,
                type: "bar",
                orientation: "h",
                marker: {
                    color: "steelblue"
                }
            }], {
                title: `[${cand}] '${category}' 키워드 기여도 (정규화 상위 20개)`,
                xaxis: {title: "비율 (Normalized)"},
                yaxis: {automargin: true}
            });
        });
    </script>
</body>
</html>
